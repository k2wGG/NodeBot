{# templates/discord_filters.html #}
{% extends 'base.html' %}

{% block title %}Discord-—Ñ–∏–ª—å—Ç—Ä—ã{% endblock %}

{% block content %}
  <div class="container mt-4">
    <h1>–§–∏–ª—å—Ç—Ä—ã –¥–ª—è Discord-–∫–∞–Ω–∞–ª–æ–≤</h1>
    <a href="{{ url_for('add_discord_filter') }}" class="btn btn-primary mb-3">
      <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä
    </a>
    <table class="table table-bordered table-hover">
      <thead class="table-light">
        <tr>
          <th>ID</th>
          <th>Telegram User</th>
          <th>Discord Channel ID</th>
          <th>–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ</th>
          <th>–ê–∫—Ç–∏–≤–Ω—ã–π?</th>
          <th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
      </thead>
      <tbody>
        {% for f in filters %}
          <tr {% if not f.active %}class="table-secondary"{% endif %}>
            <td>{{ f.id }}</td>
            <td>{{ users[f.user_id].username or users[f.user_id].telegram_id }}</td>
            <td>{{ channels[f.channel_id].channel_id }}</td>
            <td>{{ f.keyword }}</td>
            <td>
              {% if f.active %}
                <span class="badge badge-success">–î–∞</span>
              {% else %}
                <span class="badge badge-danger">–ù–µ—Ç</span>
              {% endif %}
            </td>
            <td>
              <a href="{{ url_for('edit_discord_filter', filter_id=f.id) }}"
                 class="btn btn-sm btn-warning">
                ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
              </a>
              <form action="{{ url_for('delete_discord_filter', filter_id=f.id) }}"
                    method="post"
                    style="display:inline-block; margin-left: 5px;"
                    onsubmit='return confirm("–£–¥–∞–ª–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä ¬´{{ f.keyword }}¬ª?");'>
                <button type="submit" class="btn btn-sm btn-danger">
                  üóë –£–¥–∞–ª–∏—Ç—å
                </button>
              </form>
            </td>
          </tr>
        {% else %}
          <tr>
            <td colspan="6" class="text-center">–ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
